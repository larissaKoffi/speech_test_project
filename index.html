<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Recorder</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!--link rel="shortcut icon" href="https://www.callcentrehelper.com/images/stories/2023/08/voice-1310817572-760.jpg" type="image/x-icon"--->
</head>
<body>
    
    <main>

        <button class="mic-toggle" id="mic">
            <span class="material-icons">mic</span>
        </button>

        <audio class="playback" controls></audio>


        <div id="output" class="outputText"></div>
    </main>

    <script src="main.js"></script>

<script>

    const mic = document.getElementById("mic");
    const output = document.getElementById("output");


    //voir si le nvigateur pred le module en charge
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!SpeechRecognition) {
        throw new Error("La reconnaissance vocale n'est pas supportée.");
    }


    //création de l'objet recognition
    const recognition = new SpeechRecognition();
    recognition.lang = "fr-FR";
    recognition.interimResults = true;

    //afficher la phrase
    recognition.onresult = e => {
        output.textContent = e.results[0][0].transcript;
    };


    //afficher les erreurs
    recognition.onerror = e => {
        output.textContent = "Erreur : " + e.error;
    };

    //demarrer la réconnassance vocale lorsqu'on clique sur le micro
    mic.addEventListener("click", () => {
        recognition.start();
        mic.textContent = "Écoute...";
    });

    //fin de la réconnaissance vocal
    recognition.onend = () => {
        mic.textContent = "Démarrer";
    };
</script>

</body>
</html>